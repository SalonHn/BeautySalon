
<script type="text/javascript" src="~/js/pwa-app.js"></script>

@{
    ViewData["Title"] = "Login";
    Layout = "~/Views/Shared/_LayoutLogin.cshtml";
}

<div class="bg-white p-5 divLogin">

    <form action="@Url.Content("")" method="post">
        <div class="d-flex justify-content-center">
            <img src="/img/logo.png" alt="Login-icon" class="imgLogoLogin" />
        </div>
        <div class="text-center fs-1 fw-bold">Login Prueba CI</div>
        <div class="row mt-2">
            <div class="col-2">
                <i class="fa-solid fa-user icon-login"></i>
            </div>
            <div class="col-10">
				<input class="form-control" type="text" name="username" placeholder="Username" />
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-2">
                <i class="fa-solid fa-lock icon-login"></i>
            </div>
			<div class="col-10">
                <input class="form-control" type="password" name="password" placeholder="Password" />
            </div>
        </div>
        <div class="text-danger text-center mt-2">
            @ViewBag.Error
        </div>
        <div class="d-flex justify-content-center mt-3">
			<button class="btn btn-dark" type="submit">Login</button>
        </div>
    </form>

    <hr id="install-hr" style="display: none;"/>
    <div class="d-flex justify-content-center">
        <div>
            <button id="install-button" class="btn btn-sm btn-primary" style="display: none;" onclick="installPWA()">Instalar App</button>
        </div>
    </div>
</div>

<script type="module">
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function () {
            navigator.serviceWorker.register('/firebase-messaging-sw.js').then(function (registration) {
                console.log('Service Worker registrado correctamente: ', registration);
            }).catch(function (error) {
                console.log('Error al registrar el Service Worker: ', error);
            });
        });
    }
</script>